<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
	  xmlns:n="http://typo3.org/ns/GeorgRinger/News/ViewHelpers"
	  data-namespace-typo3-fluid="true">
  
<!--
	=====================
		Partials/List/Item-newslette.html
        Modificato per ottenere le news della pagina in formato plain
        Uso: settings.layout.name = newsletter
-->

<n:excludeDisplayedNews newsItem="{newsItem}" />
<p>
 <f:render section="headLineOnTop" arguments="{settings:settings,newsItem:newsItem}"/>
      <!-- teaser -->
      <f:if condition="{settings.show.lead}">
          <n:removeMediaTags>	
		<f:if condition="{newsItem.teaser}">
			<f:then>
                      		<f:format.stripTags>
                        		{newsItem.teaser -> f:format.crop(maxCharacters: '{settings.cropMaxCharacters}', respectWordBoundaries:'1') -> f:format.html()}
                      		</f:format.stripTags>
			</f:then>
			<f:else>
                       		<f:format.stripTags>
					{newsItem.bodytext -> f:format.crop(maxCharacters: '{settings.cropMaxCharacters}', respectWordBoundaries:'1') -> f:format.html()}
                       		</f:format.stripTags>
			</f:else>
		</f:if>
          </n:removeMediaTags>
         <br/>
      </f:if>
    
     <f:if condition="{settings.show.moreLink} == '1'">
       <f:translate key="more-link" />: 
       <f:if condition="{newsItem.type} == '2'">
          <n:link newsItem="{newsItem}" settings="{settings}" uriOnly="1" /> 
       </f:if>
       <f:if condition="{newsItem.type} == '1'">
          <f:cObject typoscriptObjectPath="lib.currentdomain" /><n:link newsItem="{newsItem}" settings="{settings}" uriOnly="1" />   
       </f:if>
       <f:if condition="{newsItem.type} == '0'">
           <f:cObject typoscriptObjectPath="lib.currentdomain" /><n:link newsItem="{newsItem}" settings="{settings}" uriOnly="1" />   
       </f:if>  
       <br/>
     </f:if>
</p>
  
<f:section name="headLineOnTop">
     <f:switch expression="{settings.layout.additionalInfoFirst}">
       <f:case value='1'>
              <f:format.stripTags>
                 <f:render partial="General/AdditionalInformation" arguments="{settings:settings,newsItem:newsItem}" />
              </f:format.stripTags>
              <f:if condition="{settings.show.extraInfo} == '1'">
		<br/>
	      </f:if>
              <f:format.case>{newsItem.title}</f:format.case>
       </f:case>
       <f:defaultCase>
           <f:format.case>{newsItem.title}</f:format.case>
           <br/>
           <f:format.stripTags>
              <f:render partial="General/AdditionalInformation" arguments="{settings:settings,newsItem:newsItem}" />
            </f:format.stripTags>
       </f:defaultCase>
      </f:switch>
  </f:section>
  
</html>
